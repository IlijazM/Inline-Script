HTMLElement.prototype.render=function(){},HTMLElement.prototype.setStatic=function(){this.render=function(){},this.inlineScript=void 0,this.inlineScriptAttributes=void 0},HTMLElement.prototype.getUniqueSelector=function(){let e="",t=this;for(;"HTML"!==t.parentNode.tagName;){let n=1,i=t;for(;null!==i.previousElementSibling;)n++,i=i.previousElementSibling;e=`>:nth-child(${n})`+e,t=t.parentNode}return e=t.tagName+e,e},HTMLElement.prototype.initialContent={set(e){void 0===this._initialContent&&(this._initialContent=e)},get(){return this._initialContent}},HTMLElement.prototype.setInlineScript=function(e){void 0===this.inlineScript&&(this.inlineScript=e)},HTMLElement.prototype.hasInlineScript=function(){return void 0!==this.inlineScript},HTMLElement.prototype.setInlineScriptAttributes=function(e){void 0===this.inlineScriptAttributes&&(this.inlineScriptAttributes=e)},HTMLElement.prototype.hasInlineScriptAttributes=function(){return void 0!==this.inlineScriptAttributes};const UNIQUE_CLASS_NAME_PREFIX="--is-ucn-",CLASS_NAME="--inline-script";var inlineScriptUCN=0;const replaceList={"\\&gt;":">","\\&lt;":"<"};function reverseSanitation(e){for(const[t,n]of Object.entries(replaceList))e=e.replace(new RegExp(t,"gm"),n);return e}function escapeAll(e){return e.replace(/\\/gm,"\\\\").replace(/\$/gm,"\\$").replace(/'/gm,"\\'").replace(/"/gm,'\\"').replace(/`/gm,"\\`")}function createElements(e){const t=document.createElement("div");return t.innerHTML="<div>"+e+"</div>",t.firstChild.children}function compileHTMLSyntax(e,t){e=reverseSanitation(e);let n="",i=!1,r=0,l="";for(let c=0;c<e.length;c++){let o=e.substr(c,1);function s(t){const n=e.substr(c),i=n.indexOf(t);return n.substring(0,i+1)}if(0!==r&&(o=escapeAll(escapeAll(o))),""===n?'"'!==o&&"'"!==o&&"`"!==o||(n=o):o===n&&!1===i&&(n=""),i=!1,""!==n&&"\\"===o&&(i=!0),""!==n||"("!==o||"(<"!==s("<").split(" ").join("").split("\n").join("")||(r++,1!==r))""!==n||">"!==o||">)"!==s(")").split(" ").join("").split("\n").join("")||(r--,0!==r)?l+=o:(l+=">\\`)`)",c++);else{console.log(t.getUniqueSelector());let e="";e+="eval(InlineScript+`",e+='let parent=document.querySelector("'+t.getUniqueSelector()+'");',e+="let scope=parent;",e+="let state={render(){Array.from(parent.children).forEach(_=>_.render())}};",e+="new InlineScript().fromString(\\`<",l+=e,c++}}return l}function handleInlineScriptEvalResultUndefined(e){return void 0===e}function handleInlineScriptEvalResultHTMLCollection(e,t){if(t instanceof HTMLCollection)return Array.from(t).forEach((t=>e.append(t))),!0}function handleInlineScriptEvalResultHTMLElement(e,t){if(t instanceof HTMLElement)return e.append(t),!0}function handleInlineScriptEvalResultArray(e,t){if(t instanceof Array)return t.forEach((t=>{handleInlineScriptEvalResult(e,t)})),!0}function handleInlineScriptEvalResultPromise(e,t){if(t instanceof Promise)return t.then((t=>{handleInlineScriptEvalResult(e,t)})).catch((t=>{handleExceptionResult(e,t)})),!0}function handleInlineScriptEvalResult(e,t){handleInlineScriptEvalResultUndefined(t)||handleInlineScriptEvalResultHTMLCollection(e,t)||handleInlineScriptEvalResultHTMLElement(e,t)||handleInlineScriptEvalResultArray(e,t)||handleInlineScriptEvalResultPromise(e,t)||(e.innerHTML+=t.toString())}function handleExceptionResult(e,t){console.error(t),e.style.background="red",e.style.color="yellow",e.style.fontSize="20px",e.innerHTML=t}class InlineScript{constructor(){}setRenderFunction(element){element.render=function(){if(!element.static&&element.hasInlineScript())try{element.innerHTML="",handleInlineScriptEvalResult(element,eval(element.inlineScript))}catch(e){handleExceptionResult(element,e)}}}compileInlineScript(e){this.isInlineScript(e)&&e.setInlineScript(compileHTMLSyntax(e.innerHTML,e))}isInlineScript(e){return e.innerHTML.trim().startsWith("{")}compileAttributes(e){}renderAttributes(e){}handleAttributes(e){e.hasAttribute("static")&&e.setStatic()}getFirstAttributeName(e){const t=e.attributes;return 0===t.length?"":t[0].name}compileTagName(e){return this.isMacro(e)?this.compileMacro(e):this.isFunction(e)?this.compileFunction(e):void 0}isMacro(e){return"define"===e.tagName}compileMacro(e){}isFunction(e){return"function"===e.tagName}compileFunction(e){}hasInlineScript(e){return e.hasInlineScript()||e.hasInlineScriptAttributes()}setUniqueClassName(e){e.classList.contains(CLASS_NAME)||(e.ucn=inlineScriptUCN++,e.classList.add(UNIQUE_CLASS_NAME_PREFIX+e.ucn))}setClassName(e){e.classList.add(CLASS_NAME)}compile(e){this.compileAttributes(e),this.compileTagName(e),this.compileInlineScript(e)}setup(e){this.hasInlineScript(e)&&(this.setUniqueClassName(e),this.setClassName(e),this.setRenderFunction(e))}handle(e){this.handleAttributes(e)}scan(e,t=!0){this.compile(e),this.setup(e),e.render(),this.handle(e),t&&!e.hasInlineScript()&&this.scanAll(e.children)}scanAll(e){for(const t of e)this.scan(t)}fromString(e){const t=createElements(e);for(const e of t)this.scan(e);return t}}function inlineScript(){(new InlineScript).scan(document.body)}